<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

  <!-- LAN Gaming CSS -->
  <link rel="stylesheet" type="text/css" href="css/style.css">

  <title>Textboard</title>
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-light fixed-top bg-light">
    <a class="navbar-brand text-primary" href="/">Textboard</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link text-primary" href="/novotopico">Novo Tópico</a>
        </li>
      </ul>
    </div>
  </nav>

  <main role="main" class="container">

    <div class="row fio ">
      <% for (var x = 0; x < doc.length; x++) { %>
      <div class="row principal jumbotron jumbotron-fluid bg-light">
        <div class="col-md-12">
          <p class="text-right"><%= doc[x].data %> - <a href="/novaresposta?id=<%= doc[x]._id %>">Nº <%= doc[x]._id %></a></p>
        </div>
        <div class="col-md-12 dadostopico">
          <p class="assunto"><%= doc[x].assunto %></p>
          <p class="lead brokentext">
            
            <%= doc[x].texto %>
          
          </p>
        </div>
        <%
        var tamanho = doc[x].respostas.length
        if(tamanho>3){
          tamanho = tamanho - 3
        } else {
          tamanho = 0
        }
        for (var y = tamanho; y < doc[x].respostas.length; y++) {%>
        <div class="row resposta border rounded">
          <div class="col-md-12">
            <p class="text-right"><%= doc[x].respostas[y].dataResposta %> - <a href="/novaresposta?id=<%= doc[x]._id%>&reply=<%= doc[x].respostas[y].resposta_id %>">Nº <%= doc[x].respostas[y].resposta_id %></a></p>
          </div>
          <div class="col-md-12 dadostopico">
            <p class="lead brokentext"><%= doc[x].respostas[y].resposta %></p>
          </div>
        </div>
        <% } %>

        <div class="row fiofooter">
          <div class="col-md-12">
              <hr class="my-4">
          </div>
          <div class="col-md-6">
          </div>
          <div class="col-md-3">
            <a href="/topico?id=<%= doc[x]._id%>">Ler mais</a>
          </div>
          <div class="col-md-3">
            <a href="/novaresposta?id=<%= doc[x]._id%>">
              Responder
            </a>
          </div>
        </div>
      </div>
      <% } %>
    </div>


  </main>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="js/greentext.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
</body>
</html>